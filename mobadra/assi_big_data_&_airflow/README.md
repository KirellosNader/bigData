๐ฐ๏ธ ูุดุฑูุน ูุธุงู ุชุชุจุน ุงููุฑูุจุงุช ุงููุญุธู ุจุงุณุชุฎุฏุงู Spark Streaming ู Kafka

ูุฐุง ุงููุดุฑูุน ููุซู ุฎุท ุฃูุงุจูุจ (Pipeline) ูุงูู ููุจูุงูุงุช ุงูุถุฎูุฉ (Big Data) ููุฏู ุฅูู ุฌูุนุ ูุนุงูุฌุฉุ ูุชุฎุฒูู ุจูุงูุงุช ุชุชุจุน ุงููุฑูุจุงุช (GPS) ูู ุงูููุช ุงููุนููุ ูุนุฑุถูุง ุนูู ููุญุฉ ุชุญูู ุชูุงุนููุฉ.

๐ ุงูููููุงุช ุงูุฃุณุงุณูุฉ

Kafka: ูุธุงู ุงููุฑุงุณูุฉ ุงูููุฒุน (Broker) ูููู ุจูุงูุงุช GPS ูุญุธููุง (ุงุณู ุงูุฎุฏูุฉ: kafka).

Spark Streaming: ูุญุฑู ูุนุงูุฌุฉ ุงูุจูุงูุงุช ุงูุถุฎูุฉุ ูููู ุจูุฑุงุกุฉ ุงูุจูุงูุงุช ูู Kafka ูุชุญููููุง (ุฎุฏูุงุช: spark-master ู spark-worker).

PostgreSQL: ูุงุนุฏุฉ ุจูุงูุงุช ุนูุงุฆููุฉ ูุชุฎุฒูู ุงูุจูุงูุงุช ุงููุนุงูุฌุฉ ูู Spark (ุงุณู ุงูุฎุฏูุฉ: postgres).

Python Producer: ุจุฑูุงูุฌ (Script) ูููู ุจุชูููุฏ ูุฅุฑุณุงู ุจูุงูุงุช GPS ุงูููููุฉ ุฅูู Kafka.

Streamlit: ูุงุฌูุฉ ุฃูุงููุฉ (Frontend) ุชูุงุนููุฉ ูุนุฑุถ ุงูุจูุงูุงุช ูู ุงูููุช ุงููุนูู ุนูู ุฎุฑูุทุฉ (ุงุณู ุงูุฎุฏูุฉ: streamlit).

Docker Compose: ุฃุฏุงุฉ ูุชุดุบูู ูุฅุฏุงุฑุฉ ุฌููุน ุงูุฎุฏูุงุช ุงููุฐููุฑุฉ ุฃุนูุงู ูู ุจูุฆุฉ ููุญุฏุฉ ููุนุฒููุฉ.

๐ ูููู ุงููุดุฑูุน

ููุชุดุบูู ุงูุตุญูุญุ ูุฌุจ ุฃู ูุญุชูู ุงููุฌูุฏ ุงูุฑุฆูุณู (ุงูุฐู ููุฌุฏ ููู ููู docker-compose.yml) ุนูู ุงููููุงุช ุงูุชุงููุฉ:

docker-compose.yml: ุชุนุฑูู ูุฅุนุฏุงุฏ ุฌููุน ุงูุฎุฏูุงุช.

spark_streaming.py: ููุฏ Spark Streaming ููุนุงูุฌุฉ ุงูุจูุงูุงุช ูุชุฎุฒูููุง ูู Postgres.

gps_producer.py: ููุฏ Python ูุชูููุฏ ุจูุงูุงุช GPS ูุฅุฑุณุงููุง ุฅูู Kafka.

app.py: ููุฏ Streamlit ูุนุฑุถ ุงูุจูุงูุงุช ูู Postgres.

README.md: ููู ุงูุชูุซูู ูุฐุง.

๐๏ธ ุฏููู ุงูุชุดุบูู ุฎุทูุฉ ุจุฎุทูุฉ

ูุถูุงู ุนูู ุงููุดุฑูุน ุจุงููุงููุ ุงุชุจุน ุงูุฎุทูุงุช ุงูุชุงููุฉ ุจุงูุชุฑุชูุจ:

1. ุฅุนุฏุงุฏ ุงูุจูุฆุฉ (Docker Compose)

ูู ุจุชุดุบูู ุฌููุน ุงูุฎุฏูุงุช ุจุงุณุชุฎุฏุงู Docker Compose.

docker compose up -d


2. ุชุดุบูู ูููุฉ Spark Streaming

ุจุนุฏ ุชุฃูุฏู ูู ุฃู ุฎุฏูุงุช Spark ู Kafka ุฌุงูุฒุฉุ ูู ุจุชุดุบูู ูููุฉ Spark Streaming.

docker exec -it spark-master /opt/spark/bin/spark-submit \
    --master spark://spark-master:7077 \
    --packages org.apache.spark:spark-sql-kafka-0-10_2.12:3.5.0,org.postgresql:postgresql:42.6.0 \
    --conf spark.driver.extraJavaOptions=-Dorg.apache.spark.launcher.conf=/opt/spark/conf/spark-defaults.conf \
    --conf spark.jars.ivy=/tmp/.ivy2 \
    /app/spark_streaming.py


ููุงุญุธุฉ: ุงุจูู ูุฐู ุงููุงูุฐุฉ ููุชูุญุฉ ููุฑุงูุจุฉ ุณุฌูุงุช Spark.

3. ุชุดุบูู ุงูู Producer (ุชูููุฏ ุงูุจูุงูุงุช)

ุงูุชุญ ูุงูุฐุฉ ุทุฑููุฉ (Terminal) ุฌุฏูุฏุฉุ ููู ุจุชุดุบูู Producer ูุฅุฑุณุงู ุงูุจูุงูุงุช ุงูุนุดูุงุฆูุฉ ุฅูู Kafka.

docker exec -d spark-master python /app/gps_producer.py


4. ุนุฑุถ ุงููุชุงุฆุฌ ุนูู Streamlit

ุจุนุฏ ุชุดุบูู ุงูู Producer ูุจุฏุก Spark ูู ุชุฎุฒูู ุงูุจูุงูุงุชุ ุงูุชุญ ุงููุชุตูุญ ูุชูุฌู ุฅูู:

http://localhost:8501

5. ุฅููุงู ุงููุดุฑูุน

ูุฅููุงู ุฌููุน ุงูุฎุฏูุงุช ูุฅุฒุงูุฉ ุงูุญุงููุงุช:

docker compose down
